<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
  <meta name="viewport" content="width=device-width" />

  <!-- 'Vendor CSS' -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/css/halfmoon.min.css" rel="stylesheet" />

  <!-- MY CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>

<body class="with-custom-webkit-scrollbars with-custom-css-scrollbars" data-dm-shortcut-enabled="true"
  data-set-preferred-mode-onload="true">

  <div class="page-wrapper with-navbar-fixed-bottom">
    <div class="content-wrapper">
      <div class="container-fluid">
        <h1 class="text-center">What Number</h1>

        <!-- EXTERNAL HOSPITALS -->
        <details class="collapse-panel mw-full mt-20" closed>
          <!-- w-400 = width: 40rem (400px), mw-full = max-width: 100%, mt-20 = margin-top: 2rem (20px) -->
          <summary class="collapse-header">
            External Hospitals </summary>
          <div class="collapse-content">

            <div class="card h-lg-300 overflow-y-lg-auto">
              <div id="external" class="row row-eq-spacing"></div>
            </div>

          </div>
        </details>

        <!-- THEATRE TAB -->
        <details class="collapse-panel mw-full mt-20" closed>
          <!-- w-400 = width: 40rem (400px), mw-full = max-width: 100%, mt-20 = margin-top: 2rem (20px) -->
          <summary class="collapse-header">
            Theatres
          </summary>
          <div class="collapse-content">

            <div class="card h-lg-300 overflow-y-lg-auto">
              <div id="theatre" class="row row-eq-spacing"></div>
            </div>

          </div>
        </details>


      </div>
    </div>

    <nav class="navbar navbar-fixed-bottom">
      <!-- Reference: https://www.gethalfmoon.com/docs/navbar#navbar-fixed-bottom -->
      <button class="btn btn-action mr-5" type="button" onclick="halfmoon.toggleDarkMode()"
        aria-label="Toggle dark mode">
        <i class="fas fa-moon" aria-hidden="true"></i>
      </button>

      <!-- SEARCH BOX -->
      <form class="form-inline ml-auto" action="..." method="...">
        <!-- ml-auto = margin-left: auto -->
        <div class="input-group searchbox">
          <input id="searchbar" type="text" onkeyup="search_dir()" class="form-control" placeholder="Search page">
          <div class="input-group-append">
            <button class="btn" type="submit">
              <i class="fa fa-search" aria-hidden="true"></i>
              <span class="sr-only">Search docs</span> <!-- sr-only = show only on screen readers -->
            </button>
          </div>
        </div>
      </form>

    </nav>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/js/halfmoon.min.js"></script>
  <!-- <script src="theatre.js"></script> -->
  <script src="directory.js"></script>

  <script>

    loadDirs()

    // fetch('directory.json').then(response => {
    //   return response.json();
    // }).then(jsondata => {
    //   loadDirectory(jsondata)
    // })
    //   .catch(err => { console.log('Error: ' + err) });


    // function loadDirectory(data) {
    //   var i = 0;

    //   data.sort(getorderAZ("Location"))

    //   function getorderAZ(prop) {
    //     return function (a, b) {
    //       if (a[prop] > b[prop]) {
    //         return 1
    //       } else if (a[prop] < b[prop]) {
    //         return -1
    //       }
    //       return 0
    //     }
    //   }

    //   // console.log(data)
    //   var div = document.getElementById('phonebook')
    //   for (i = 0; i < data.length; i++) {

    //     dir = document.createElement('div')
    //     dir.id = "dir"

    //     dir.className = "directory col-12 col-md-4 col-xl-3"
    //     dir.innerHTML = '<div class="card">' +
    //       '<h3 class="card-title text-wrap searchme">' + data[i].Location + '</h3>' +
    //       '<p class="details">' + data[i].Type + '<span>: </span>' + data[i].Number + '</p>' +
    //       '</div>'



    //     div.appendChild(dir)

    //     linka = document.createElement('a')
    //     linka.className = "fas fa-phone-square"
    //     linka.innerHTML = "Call"
    //     linka.href = 'telprompt://' + data[i].Number
    //     linka.id = data[i].Number

    //     // document.getElementById("dir").appendChild(node)
    //     dir.lastChild.appendChild(linka);
    //   }

    // }



    function search_dir() {

      let input = document.getElementById('searchbar').value
      input = input.toLowerCase();
      let x = document.getElementsByClassName('directory');

      for (i = 0; i < x.length; i++) {
        if (!x[i].innerHTML.toLowerCase().includes(input)) {
          x[i].style.display = "none";

        }
        else {
          console.log('else')
          x[i].style.display = "list-item";
        }
      }
    }
  </script>

</body>

</html>